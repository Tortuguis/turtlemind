(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89316],{57167:()=>{},34352:(e,t,s)=>{"use strict";s.d(t,{dj:()=>p,oR:()=>c});var i=s(99515);let n=0,o=new Map,r=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),u({type:"REMOVE_TOAST",toastId:e})},3e3);o.set(e,t)},a=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?r(s):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function u(e){d=a(d,e),l.forEach(e=>{e(d)})}function c(e){let{...t}=e,s=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>u({type:"DISMISS_TOAST",toastId:s});return u({type:"ADD_TOAST",toast:{...t,duration:t.duration||3e3,id:s,open:!0,onOpenChange:e=>{e||i()}}}),{id:s,dismiss:i,update:e=>u({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function p(){let[e,t]=i.useState(d);return i.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>u({type:"DISMISS_TOAST",toastId:e})}}},25832:(e,t,s)=>{"use strict";s.d(t,{b:()=>n});class i{unregister(){this.emitter.off(this.event,this),this._destroy()}_destroy(){return!this.destroyed&&(this.handler=null,this.emitter=null,this.destroyed=!0,!0)}constructor(e,t,s,i){this.destroyed=!1,this.event=e,this.handler=t,this.emitter=s,this.listenBy=i}}class n{on(e,t){var s;if(!t)throw TypeError("invalid handler! --EventEmitter");this._events[e]||(this._events[e]=[]);let n=new i(e,t,this,null);return null===(s=this._events[e])||void 0===s||s.push(n),n}listenBy(e,t,s){var n;if(!s)throw TypeError("invalid handler! --EventEmitter");this._events[t]||(this._events[t]=[]);let o=new i(t,s,this,e);return null===(n=this._events[t])||void 0===n||n.push(o),o}once(e,t){let s=this.on(e,e=>{t(e),s.unregister()});return s}emit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this._events[e])return!1;let s=[];for(let i of this._events[e])i.destroyed||(s.push(i),i.handler.call(this,t));return!0}off(e,t){if(!this._events[e])return!1;if(t){for(let n=this._events[e],o=0;o<n.length;o++){var s,i;let r=n[o];if(r===t)return this._events[e]=null===(s=this._events[e])||void 0===s?void 0:s.filter(e=>e!==r),(null===(i=this._events[e])||void 0===i?void 0:i.length)===0&&delete this._events[e],!0}return console.error(t,this),console.error("Cannot find listener of ".concat(e," --EventEmitter")),!1}for(let t=this._events[e],s=0;s<t.length;s++){let i=t[s];this._events[e][s]=null,null==i||i._destroy()}return delete this._events[e],!0}stopListenBy(e){for(let s in this._events){var t;this._events[s]=null===(t=this._events[s])||void 0===t?void 0:t.filter(t=>t.listenBy!==e||(t._destroy(),!1))}}removeAllListeners(){for(let e in this._events){let t=this._events[e];if(t){for(let e=0;e<t.length;e++)t[e]=null;this._events[e]=null}}}constructor(){this._events={}}}},16834:(e,t,s)=>{"use strict";s.d(t,{JB:()=>i,d5:()=>n,eu:()=>o});let i={readOnly:!0,folding:!0,lineDecorationsWidth:0,renderValidationDecorations:"off",lineNumbers:"off",wordWrap:"on",unicodeHighlight:{ambiguousCharacters:!1,invisibleCharacters:!1,nonBasicASCII:!1,allowedLocales:Object.fromEntries(s(57271).o.map(e=>[e.locale,!0]))},scrollbar:{verticalScrollbarSize:6,horizontalScrollbarSize:6},minimap:{enabled:!1},padding:{top:15}},n={UserInfo:"UserService.userInfo",inviteCode:"INVITE_CODE",waitListDetail:"wait_list_detail",showedSharePopover:"showedSharePopover",updatesVersion:"UPDATES_VERSION",homePageNotice:"home_page_notice",freeQuotes:"free_quotes",spaceDeploymentGuideClosedSessionIds:"spaceDeploymentGuideClosedSessionIds"},o={loginSuccess:"login_success"}},18214:(e,t,s)=>{"use strict";s.d(t,{F:()=>d});var i=s(57271),n=s(83071),o=s(86232),r=s(34569),a=s(54036);class l{isToday(e){return(0,n.A)(this.getDateObj(e))}isYesterday(e){return(0,o.A)(this.getDateObj(e))}fromNow(e){return(0,r.A)(this.getDateObj(e),{addSuffix:!0,roundingMethod:"ceil"})}protoTimestampToDate(e){return new Date(1e3*Number(e.seconds)+Math.floor(e.nanos/1e6))}dateToProtoTimestamp(e){return{seconds:BigInt(Math.floor(e.getTime()/1e3)),nanos:e.getTime()%1e3*1e6}}format(e,t,s){let n=t;("zh-CN"===i.I.translationManager.locale||"zh-TW"===i.I.translationManager.locale)&&"PP"===n&&(n="PPP");try{return(0,a.A)(this.getDateObj(e),n,s)}catch(t){return this.getDateObj(e).toLocaleDateString()}}getDateObj(e){return e instanceof Date?e:"number"==typeof e?new Date(e):this.protoTimestampToDate(e)}}let d=new l},12766:(e,t,s)=>{"use strict";s.d(t,{a:()=>l});var i=s(58178);let n={env:"local",chatWebsocketUrl:"ws://localhost:4000",notificationWebsocketUrl:"wss://vidabiz.butterfly-effect.dev",serverUrl:"http://localhost:4000",zitadelAuthority:"https://sso.butterfly-effect.dev",zitadelClientId:"303049293793658310",zitadelOrgId:"302734027742250599",cfTurnstileSiteKey:"0x4AAAAAAA_sSfihqCu_qUHQ",rpcServerUrl:"https://vidabiz.butterfly-effect.dev",deployDomain:"vidaes.app",sandboxDomain:"ooop.work",prod:!1},o={env:"dev",chatWebsocketUrl:"wss://vida.butterfly-effect.dev",notificationWebsocketUrl:"wss://vidabiz.butterfly-effect.dev",serverUrl:"https://vida.butterfly-effect.dev",zitadelAuthority:"https://sso.butterfly-effect.dev",zitadelClientId:"303049293793658310",zitadelOrgId:"302734027742250599",cfTurnstileSiteKey:"0x4AAAAAAA_sSfihqCu_qUHQ",rpcServerUrl:"https://vidabiz.butterfly-effect.dev",deployDomain:"vidaes.app",sandboxDomain:"ooop.work",prod:!1},r={env:"prod",chatWebsocketUrl:"wss://api.manus.im",notificationWebsocketUrl:"wss://api.manus.im",serverUrl:"https://api.manus.im",zitadelAuthority:"https://sso.manus.im",zitadelClientId:"309219909462753669",zitadelOrgId:"309135332211717577",cfTurnstileSiteKey:"0x4AAAAAAA_sd0eRNCinWBgU",rpcServerUrl:"https://api.manus.im",deployDomain:"manus.space",sandboxDomain:"manus.computer",prod:!0};!function(){let e="local"===i.env.APP_ENV,t="dev"===i.env.APP_ENV}();class a{get notificationWebsocketUrl(){var e;return(null===(e=this.env)||void 0===e?void 0:e.notificationWebsocketUrl)||""}get chatWebsocketUrl(){var e;return(null===(e=this.env)||void 0===e?void 0:e.chatWebsocketUrl)||""}get zitadel(){var e,t,s;return{authority:(null===(e=this.env)||void 0===e?void 0:e.zitadelAuthority)||"",clientId:(null===(t=this.env)||void 0===t?void 0:t.zitadelClientId)||"",orgId:(null===(s=this.env)||void 0===s?void 0:s.zitadelOrgId)||""}}get rpcServerUrl(){var e;return(null===(e=this.env)||void 0===e?void 0:e.rpcServerUrl)||""}get isProd(){return!this.env||"prod"===this.env.env}get serverUrl(){var e;return null===(e=this.env)||void 0===e?void 0:e.serverUrl}get mod(){var e;return null===(e=this.env)||void 0===e?void 0:e.env}get cfTurnstileSiteKey(){var e;return null===(e=this.env)||void 0===e?void 0:e.cfTurnstileSiteKey}get sandboxDomain(){var e;return null===(e=this.env)||void 0===e?void 0:e.sandboxDomain}constructor(){this.env=globalThis.__manus_env__}}let l=new a},91452:(e,t,s)=>{"use strict";s.d(t,{GV:()=>i.GV,M_:()=>i.M_,jL:()=>i.jL});var i=s(5685)},5685:(e,t,s)=>{"use strict";s.d(t,{M_:()=>M,jL:()=>I,GV:()=>b});var i=s(34137),n=s(40757),o=s(25087),r=s(15784),a=s(13522),l=s(17029),d=s(80602),u=s(88672),c=s(92264),p=s(52658);s(23693),s(57148);var v=s(10424),g=s(92749),f=s(87963),h=s(77883),m=s(4331),y=s(92099);BigInt.prototype.toJSON=function(){return Number(this)};let S=(0,a.HY)({[v.q.reducerPath]:v.q.reducer,chat:g.V.reducer,auth:n.RJ.reducer,websocket:r.M.reducer,sessions:o.u.reducer,sessionSwitch:y.$.reducer,agentWorkspace:i.V.reducer,knowledge:h.P.reducer,configs:f.e.reducer,notificationSlice:m.y.reducer}),w=(0,c.rL)({key:"root",version:8,storage:p.A,whitelist:["configs"],async migrate(e,t){var s;if((null==e?void 0:null===(s=e._persist)||void 0===s?void 0:s.version)===t)return e}},S),I=u.wA.withTypes(),b=u.d4.withTypes();u.Pj.withTypes();let M=(()=>{let e=(0,l.U1)({reducer:w,middleware:e=>e({serializableCheck:!1}).concat(v.q.middleware)});return(0,d.$k)(e.dispatch),e})()},10424:(e,t,s)=>{"use strict";s.d(t,{q:()=>a});var i=s(12766),n=s(27080),o=s(80602),r=s(24990);let a=(0,n.xP)({reducerPath:"api",baseQuery:async(e,t,s)=>{let n=await (0,o.cw)({baseUrl:"prod"===i.a.mod?i.a.serverUrl:"/",prepareHeaders:async e=>await (0,r.q)(e)})(e,t,s);if(n.error)return n;let a=n.data;if(a.error){var l,d;return{error:{status:(null===(d=n.meta)||void 0===d?void 0:null===(l=d.response)||void 0===l?void 0:l.status)||400,data:a.error}}}return{data:a.data}},tagTypes:["Sessions","Uploads"],endpoints:()=>({})})},24990:(e,t,s)=>{"use strict";s.d(t,{q:()=>r});var i=s(57271),n=s(91452),o=s(36498);async function r(e,t){let s=await (0,o.g)();return s&&(e.set("authorization","Bearer ".concat(s)),(null==t?void 0:t.setApiKey)&&e.set("X-Api-Key",s)),e.set("x-client-type","web"),e.set("x-client-id",n.M_.getState().configs.clientId),e.set("x-client-locale",i.I.translationManager.locale),e}},23693:(e,t,s)=>{"use strict";s.d(t,{R:()=>r});var i=s(55496),n=s(10424),o=s(23254);let r=n.q.injectEndpoints({endpoints:e=>({getSession:e.query({query:(0,o.V)(i.nC.chat.getSession),keepUnusedDataFor:0}),deleteSession:e.query({query:(0,o.V)(i.nC.chat.deleteSession),keepUnusedDataFor:0})})}),{useGetSessionQuery:a}=r},36498:(e,t,s)=>{"use strict";s.d(t,{g:()=>l});var i=s(99843),n=s(78085),o=s(12766);let r=(0,i.E)((()=>{var e;let t=null===(e=window)||void 0===e?void 0:e.location.origin;return{authority:o.a.zitadel.authority,client_id:o.a.zitadel.clientId,redirect_uri:"".concat(t).concat(n.bw.auth.callback),post_logout_redirect_uri:"".concat(t,"/"),scope:"openid email profile urn:zitadel:iam:org:id:".concat(o.a.zitadel.orgId," urn:zitadel:iam:org:project:id:zitadel:aud")}})());async function a(){var e;return null===(e=await (null==r?void 0:r.userManager.getUser()))||void 0===e?void 0:e.profile.access_token}async function l(){let e;let t=document.cookie.split(";");for(let s=0;s<t.length;s++){let[i,n]=t[s].split("=");if((null==i?void 0:i.trim())==="session_id"){e=n;break}}return e||(e=await a()),e}},57148:(e,t,s)=>{"use strict";s.d(t,{Ef:()=>r});var i=s(55496),n=s(10424),o=s(23254);let r=n.q.injectEndpoints({endpoints:e=>({getPresignedUrl:e.query({query:(0,o.V)(i.nC.chat.getPresignedUploadUrl)}),completeUpload:e.mutation({query:(0,o.V)(i.nC.chat.uploadComplete),invalidatesTags:["Sessions"]}),uploadToS3:e.mutation({queryFn:async e=>{let{url:t,file:s,onProgress:n}=e;try{return await new Promise((e,o)=>{let r=new XMLHttpRequest;r.upload.addEventListener("progress",e=>{if(e.lengthComputable&&n){let t=Math.round(e.loaded/e.total*100);n(t)}}),r.addEventListener("load",()=>{200===r.status?e():o(Error("Upload failed with status ".concat(r.status)))}),r.addEventListener("error",()=>{o(Error("Upload failed"))}),r.open("PUT",t),r.setRequestHeader("Content-Type",s.type);let a=(0,i.$j)(s.name);a&&r.setRequestHeader("Content-Disposition",a),r.send(s)}),{data:"ok"}}catch(e){return{error:{status:"CUSTOM_ERROR",error:e instanceof Error?e.message:"Upload failed"}}}}})})}),{useGetPresignedUrlQuery:a,useCompleteUploadMutation:l}=r},23254:(e,t,s)=>{"use strict";function i(e){return t=>({url:e.route,method:e.method,params:["GET","DELETE"].includes(e.method)?t:void 0,body:["GET","DELETE"].includes(e.method)?void 0:t})}s.d(t,{V:()=>i})},34137:(e,t,s)=>{"use strict";s.d(t,{V:()=>i});let i=(0,s(17029).Z0)({name:"agentWorkspace",initialState:{sandboxIsLoading:!1,sidebarType:null,isSidebarHovering:!1,isSidebarVisibleInMobile:!1,sidebarLocation:"inside",filePreviewProps:null,animationLock:!1,isTimelinePlaying:!1,vncDialogVisible:!1},reducers:{setSidebarType(e,t){e.sidebarType=t.payload},setSidebarLocation(e,t){e.sidebarLocation=t.payload},setSandboxIsLoading(e,t){e.sandboxIsLoading=t.payload},setFilePreviewerProps(e,t){e.filePreviewProps=t.payload},setAnimationLock(e,t){e.animationLock=t.payload},setIsSidebarHovering:(e,t)=>{e.isSidebarHovering=t.payload},setTimelinePlaying:(e,t)=>{e.isTimelinePlaying=t.payload},setVncDialogVisible:(e,t)=>{if(e.vncDialogVisible=t.payload.visible,!t.payload.fromUrlChange){let t=new URL(window.location.href);e.vncDialogVisible?t.searchParams.set("vnc","1"):t.searchParams.delete("vnc"),window.history.pushState({vncDialogVisible:e.vncDialogVisible},"",t.toString())}},setIsSidebarVisibleInMobile:(e,t)=>{e.isSidebarVisibleInMobile=t.payload}},selectors:{sandboxIsLoading:e=>e.sandboxIsLoading,sidebarType:e=>e.sidebarType,sidebarLocation:e=>e.sidebarLocation,isSidebarOpen:e=>null!==e.sidebarType,filePreviewerProps:e=>e.filePreviewProps,animationLock:e=>e.animationLock,isSidebarVisibleInMobile:e=>e.isSidebarVisibleInMobile,isSidebarHovering:e=>e.isSidebarHovering,isTimelinePlaying:e=>e.isTimelinePlaying,vncDialogVisible:e=>e.vncDialogVisible}})},40757:(e,t,s)=>{"use strict";s.d(t,{Pq:()=>a,RJ:()=>l,jD:()=>d});var i=s(16834),n=s(25832),o=s(17029),r=s(19208);function a(e){let t=!1,s=!1;return e&&(t=!0,e.isAlpha&&(s=!0)),{isLogin:t,isActive:s}}let l=(0,o.Z0)({name:"auth",initialState:{userInfo:null,modifying:!1,avatarUploading:!1,authLoading:!0,freeQuotes:null},reducers:{setAuthLoading:(e,t)=>{e.authLoading=t.payload},setUserInfo:(e,t)=>{e.userInfo=t.payload,localStorage.setItem(i.d5.UserInfo,JSON.stringify(e.userInfo))},updateUserInfo:(e,t)=>{if(e.userInfo){var s,n;(null===(s=t.payload)||void 0===s?void 0:s.avatar)&&(e.userInfo.avatar=t.payload.avatar),(null===(n=t.payload)||void 0===n?void 0:n.nickname)&&(e.userInfo.nickname=t.payload.nickname)}else e.userInfo=null;localStorage.setItem(i.d5.UserInfo,JSON.stringify(e.userInfo))},setFreeQuotes:(e,t)=>{e.freeQuotes=t.payload,localStorage.setItem(i.d5.freeQuotes,JSON.stringify(e.freeQuotes))},setAvatarUploading:(e,t)=>{e.avatarUploading=t.payload},setUserAvatar:(e,t)=>{e.userInfo&&(e.userInfo.avatar=t.payload)},setModifying:(e,t)=>{e.modifying=t.payload}},selectors:{authLoading:e=>e.authLoading,userInfo:e=>e.userInfo,freeQuotes:e=>e.freeQuotes,authStatus:(0,r.Mz)(e=>e.userInfo,e=>a(e)),userEmail:e=>{var t;return(null===(t=e.userInfo)||void 0===t?void 0:t.email)||""},userName:e=>{var t,s,i,n;if(null===(t=e.userInfo)||void 0===t?void 0:t.nickname)return e.userInfo.nickname;if(null===(s=e.userInfo)||void 0===s?void 0:s.firstname)return null===(n=e.userInfo)||void 0===n?void 0:n.firstname;let o=(null===(i=e.userInfo)||void 0===i?void 0:i.email)||"";return o&&o.split("@")[0]||""},isIDPUser:e=>{var t,s;return!(null===(s=e.userInfo)||void 0===s?void 0:null===(t=s.platformList)||void 0===t?void 0:t.includes("common_email"))},userAvatar:e=>{var t;return(null===(t=e.userInfo)||void 0===t?void 0:t.avatar)||""},avatarUploading:e=>e.avatarUploading,modifying:e=>e.modifying}}),d=new n.b},92749:(e,t,s)=>{"use strict";s.d(t,{V:()=>o});var i=s(17029),n=s(19208);let o=(0,i.Z0)({name:"chat",initialState:{files:{},fileIds:[],inputValue:"",quoteMessageId:null,autoPreviewFile:null,previewingFileUrl:null,showSharePopover:null},reducers:{afterSendQuestion:e=>{e.files={},e.fileIds=[],e.quoteMessageId=null},fileAdded:(e,t)=>{e.fileIds.push(t.payload.id),e.files[t.payload.id]=t.payload},fileIdGenerated:(e,t)=>{let{tempId:s,realId:i}=t.payload;e.files[s]&&(e.files[i]={...e.files[s]},delete e.files[s])},fileRemoved:(e,t)=>{e.fileIds=e.fileIds.filter(e=>e!==t.payload),delete e.files[t.payload]},fileProgressUpdated:(e,t)=>{let s=e.files[t.payload.id];s&&(100===t.payload.progress?s.status="pending":s.status="uploading",s.progress=t.payload.progress)},fileCompleted:(e,t)=>{let s=e.files[t.payload.id];s&&(s.status="success",s.error=void 0,s.url=t.payload.url,s.previewUrl=void 0)},fileFailed:(e,t)=>{let{error:s,id:i}=t.payload,n=e.files[i];n&&(n.status="error",n.error=s,n.progress=0)},filesCleared:e=>{e.fileIds=[],e.files={}},setInputValue:(e,t)=>{e.inputValue=t.payload},quoteMessage:(e,t)=>{e.quoteMessageId=t.payload},autoPreviewFile:(e,t)=>{e.autoPreviewFile=t.payload},setPreviewingFileUrl:(e,t)=>{e.previewingFileUrl=t.payload},setShowSharePopover:(e,t)=>{e.showSharePopover=t.payload}},selectors:{fileIds:e=>e.fileIds,file:(0,n.Mz)([(e,t)=>e.files,(e,t)=>t],(e,t)=>e[t]),selectFilesByFileIds:(0,n.Mz)([e=>e.files,(e,t)=>t],(e,t)=>t.flatMap(t=>{let s=e[t];return s?[s]:[]})),filePreviewUrlMap:(0,n.Mz)(e=>e.files,e=>[...Object.values(e).entries()].reduce((e,t)=>{let[s,i]=t;return{...e,[s]:{previewUrl:i.previewUrl}}},{})),allCompleteFiles:(0,n.Mz)(e=>e.files,e=>!Object.values(e).some(e=>"success"!==e.status)),inputValue:e=>e.inputValue,autoPreviewFile:e=>e.autoPreviewFile,previewingFileUrl:e=>e.previewingFileUrl,showSharePopover:e=>e.showSharePopover}})},87963:(e,t,s)=>{"use strict";s.d(t,{e:()=>r});var i=s(55496),n=s(17029);let o={sessionListPinned:!0,agentWorkspaceAutoExpanded:!0,automaticallyLearnKnowledge:!0,theme:"system",clientId:(0,i.vd)(),effort:"standard",browserNotificationShowed:!1,gotoComputerTipsShowed:!1,firstMessageTipsShowedV2:!1},r=(0,n.Z0)({name:"configs",initialState:o,reducers:{setSessionListPinned:(e,t)=>{e.sessionListPinned=t.payload},setAgentWorkspaceAutoExpanded:(e,t)=>{e.agentWorkspaceAutoExpanded=t.payload},setAutomaticallyLearnKnowledge:(e,t)=>{e.automaticallyLearnKnowledge=t.payload},setTheme:(e,t)=>{e.theme=t.payload},setEffort:(e,t)=>{e.effort=t.payload},setBrowserNotificationShowed:(e,t)=>{e.browserNotificationShowed=t.payload},setGotoComputerTipsShowed:(e,t)=>{e.gotoComputerTipsShowed=t.payload},setFirstMessageTipsShowed:(e,t)=>{e.firstMessageTipsShowedV2=t.payload}},selectors:{sessionListPinned:e=>e.sessionListPinned,agentWorkspaceAutoExpanded:e=>e.agentWorkspaceAutoExpanded,automaticallyLearnKnowledge:e=>e.automaticallyLearnKnowledge,theme:e=>e.theme,clientId:e=>e.clientId,effort:e=>e.effort,browserNotificationShowed:e=>e.browserNotificationShowed,gotoComputerTipsShowed:e=>e.gotoComputerTipsShowed,firstMessageTipsShowed:e=>e.firstMessageTipsShowedV2}})},77883:(e,t,s)=>{"use strict";s.d(t,{P:()=>i});let i=(0,s(17029).Z0)({name:"knowledge",initialState:{userKnowledgeListLoading:!1,suggestedKnowledgeMap:{},userKnowledgeList:[],userKnowledgeTotal:0},reducers:{setUserKnowledgeListLoading:(e,t)=>{e.userKnowledgeListLoading=t.payload},setSuggestedKnowledgeList:(e,t)=>{let s=t.payload;if(0===s.length)return;let i=s[0].sessionUid;e.suggestedKnowledgeMap[i]=s},setUserKnowledgeList:(e,t)=>{e.userKnowledgeList=t.payload},createUserKnowledge:(e,t)=>{e.userKnowledgeList=[t.payload,...e.userKnowledgeList],e.userKnowledgeTotal+=1},updateUserKnowledge:(e,t)=>{e.userKnowledgeList=e.userKnowledgeList.map(e=>e.uid===t.payload.uid?t.payload:e)},deleteUserKnowledge:(e,t)=>{e.userKnowledgeList=e.userKnowledgeList.filter(e=>e.uid!==t.payload.knowledgeUid),e.userKnowledgeTotal-=1},setUserKnowledgeTotal:(e,t)=>{e.userKnowledgeTotal=t.payload},updateSuggestedKnowledge:(e,t)=>{let s=t.payload;if(!s)return;let i=s.sessionUid,n=(e.suggestedKnowledgeMap[i]||[]).map(e=>e.uid===s.uid?s:e);e.suggestedKnowledgeMap[i]=n}},selectors:{knowledgeListLoading:e=>e.userKnowledgeListLoading,userKnowledgeList:e=>e.userKnowledgeList,userKnowledgeTotal:e=>e.userKnowledgeTotal,suggestedKnowledgeMap:e=>e.suggestedKnowledgeMap}})},4331:(e,t,s)=>{"use strict";s.d(t,{y:()=>i});let i=(0,s(17029).Z0)({name:"notification",initialState:{connectStatus:"default",connectError:null},reducers:{setConnectStatus(e,t){e.connectStatus=t.payload},setConnectError(e,t){e.connectError=t.payload}},selectors:{connectStatus:e=>e.connectStatus,connectError:e=>e.connectError}})},92099:(e,t,s)=>{"use strict";s.d(t,{$:()=>i});let i=(0,s(17029).Z0)({name:"sessionSwitch",initialState:{keyword:"",sessions:[]},reducers:{setKeyword:(e,t)=>{e.keyword=t.payload},setSessions:(e,t)=>{e.sessions=t.payload}},selectors:{keyword:e=>e.keyword,sessions:e=>e.sessions}})},25087:(e,t,s)=>{"use strict";s.d(t,{L:()=>a,u:()=>d});var i=s(18214),n=s(17029),o=s(19208);let r=(e,t)=>{let s=e.lastMessageTime||e.createdAt,n=t.lastMessageTime||t.createdAt,o=0,r=0;return s&&(o=i.F.protoTimestampToDate(s).getTime()),n&&(r=i.F.protoTimestampToDate(n).getTime()),r-o},a=(0,n.pU)({selectId:e=>e.uid}),l={currentSessionId:null,searchValue:"",isSearchMode:!1,sessions:a.getInitialState(),loadSessionLoading:!1,isShareMode:!1,sessionListIds:[]},d=(0,n.Z0)({name:"sessions",initialState:l,reducers:{setLoadSessionLoading(e,t){e.loadSessionLoading=t.payload},setCurrentSessionId(e,t){e.currentSessionId=t.payload},setSearchValue(e,t){e.searchValue=t.payload},setIsSearchMode(e,t){e.isSearchMode=t.payload},setIsShareMode(e,t){e.isShareMode=t.payload},setSessions(e,t){a.setMany(e.sessions,t.payload)},setSessionListIds(e,t){e.sessionListIds=t.payload},upsertSession(e,t){e.sessionListIds.includes(t.payload.uid)||(e.sessionListIds=[t.payload.uid,...e.sessionListIds]),a.upsertOne(e.sessions,t.payload)},toggleSessionFavorite(e,t){a.updateOne(e.sessions,{id:t.payload.uid,changes:{isFavorite:t.payload.isFavorite}}),t.payload.isFavorite?e.sessionListIds=e.sessionListIds.filter(e=>e!==t.payload.uid):e.sessionListIds=[t.payload.uid,...e.sessionListIds]},setSessionTitle(e,t){a.updateOne(e.sessions,{id:t.payload.sessionId,changes:{title:t.payload.title}})},shareSession(e,t){var s;a.updateOne(e.sessions,{id:t.payload.sessionId,changes:{isShared:null!==(s=t.payload.isShared)&&void 0!==s&&s}})},deleteSessions(e,t){a.removeOne(e.sessions,t.payload.sessionId),e.sessionListIds=e.sessionListIds.filter(e=>e!==t.payload.sessionId),t.payload.sessionId===e.currentSessionId&&(e.currentSessionId=null)},handleSessionNewMessageEvent(e,t){let{payload:s}=t,i={...s.lastDisplayMessage&&{lastDisplayMessage:s.lastDisplayMessage},...s.lastMessageTime&&{lastMessageTime:s.lastMessageTime},...void 0!==s.unreadMessageCount&&{unreadMessageCount:s.sessionUid===e.currentSessionId?0:s.unreadMessageCount},...void 0!==s.newMessageCount&&{newMessageCount:s.newMessageCount},...void 0!==s.status&&{status:s.status}};a.updateOne(e.sessions,{id:s.sessionUid,changes:i})},handleSessionTitleEvent(e,t){let{payload:s}=t;a.updateOne(e.sessions,{id:s.sessionUid,changes:{title:s.title,icon:s.icon,iconInfo:s.iconInfo}})},clearUnreadMessageCount(e,t){a.updateOne(e.sessions,{id:t.payload,changes:{unreadMessageCount:0}})},setIsSharePopoverVisible(e,t){e.isSharePopoverVisible=t.payload}},selectors:{currentSessionid:e=>e.currentSessionId,currentSession:(0,o.Mz)(e=>e.currentSessionId,e=>e.sessions,(e,t)=>e?a.getSelectors().selectById(t,e):null),searchValue:e=>e.searchValue,isSearchMode:e=>e.isSearchMode,sessions:(0,o.Mz)([e=>e.sessions,e=>e.sessionListIds],(e,t)=>t.flatMap(t=>{let s=a.getSelectors().selectById(e,t);return s&&!s.isFavorite?[s]:[]}).sort(r)),getSession:(0,o.Mz)([e=>e.sessions,(e,t)=>t],(e,t)=>t?a.getSelectors().selectById(e,t):null),loadSessionLoading:e=>e.loadSessionLoading,isShareMode:e=>e.isShareMode,favoriteSessions:(0,o.Mz)([e=>e.sessions],e=>a.getSelectors().selectAll(e).filter(e=>e.isFavorite).sort(r)),isSharePopoverVisible:e=>e.isSharePopoverVisible}})},44238:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});let i=(0,s(17029).pU)({selectId:e=>e.id,sortComparer:(e,t)=>e.timestamp-t.timestamp})},17240:(e,t,s)=>{"use strict";s.d(t,{U8:()=>n,jh:()=>a,ru:()=>o,v9:()=>r});var i=s(55496);function n(e,t){var s,i,n;if(0===e.length)return{start:0,end:0,currentTimestamp:0,currentIndex:-1,prevPercentage:0,nextPercentage:100};let o=e[0].ts,r=e[e.length-1].ts,a=r-o;if(0===t)return{start:o,end:r,currentTimestamp:o,currentIndex:e[0].index,prevPercentage:0,nextPercentage:1===e.length?100:((null!==(i=null===(s=e[1])||void 0===s?void 0:s.ts)&&void 0!==i?i:r)-o)/a*100};if(100===t){let t=e[e.length-1],s=e[e.length-2];return{start:o,end:r,currentTimestamp:r,currentIndex:t.index,prevPercentage:s?(s.ts-o)/a*100:0,nextPercentage:100}}let l=o+a*t/100,d=e.findIndex(e=>e.ts>=l);-1===d?d=e.length-1:d>0&&((null===(n=e[d])||void 0===n?void 0:n.ts)===l||Math.abs(e[d-1].ts-l)<Math.abs(e[d].ts-l)&&d--);let u=d-1;for(;u>=0&&e[u].ts===e[d].ts;)u--;let c=u>=0?e[u].ts:o,p=d+1;for(;p<e.length&&e[p].ts===e[d].ts;)p++;let v=p<e.length?e[p].ts:r;return{start:o,end:r,currentTimestamp:l,currentIndex:e[d].index,prevPercentage:(c-o)/a*100,nextPercentage:(v-o)/a*100}}function o(e,t,s){if(0===s.length)return[];let i=[];return t.forEach(t=>{let{id:s,index:n}=t,o=e[s];o&&i.push({ts:o.timestamp,index:n})}),i.sort((e,t)=>e.ts-t.ts)}function r(e,t,s){let n=t.flatMap(t=>e[t]?[e[t]]:[]).sort((e,t)=>e.timestamp-t.timestamp),o=n.map(e=>e.id),r=n.filter(e=>"event"===e.type&&i.yF.isEventInScope(e.event,"timeline"));if(0===r.length)return 0;let a=r[0].timestamp,l=a+(r[r.length-1].timestamp-a)*s/100,d="",u=Number.MAX_VALUE;for(let e=0;e<r.length;e++){let t=r[e],s=t.timestamp-l,i=Math.abs(s);if(i<u)u=i,d=t.id;else if(s>0)break}return o.findIndex(e=>e===d)}function a(e,t){if(0===e.length)return 0;let s=e[0].ts,i=e[e.length-1].ts;return t<=s?0:t>=i?100:(t-s)/(i-s)*100}},15784:(e,t,s)=>{"use strict";s.d(t,{r:()=>x,M:()=>A});var i=s(34352),n=s(55496),o=s(17029),r=s(57271),a=s(92264),l=s(44238),d=s(17240),u=s(19208);let c=(0,u.Ad)({memoize:u.i5,memoizeOptions:{equalityCheck:(e,t)=>!("object"!=typeof e||null===e||Array.isArray(e)||"object"!=typeof t||null===t||Array.isArray(t))||e===t}});function p(e){return(0,u.Mz)(e=>e.entities,t=>t.scopeEvents[e],(t,s)=>s.map(e=>{let{id:s}=e,i=t[s];return(null==i?void 0:i.type)==="event"?i.event:null}).filter(t=>!!t&&n.yF.isEventInScope(t,e)))}let v=p("chatBox"),g=p("sandbox"),f=(0,u.Mz)(v,e=>{let t=e.findLastIndex(e=>"statusUpdate"===e.type&&"stopped"===e.agentStatus);return!!e[e.length-1]&&-1!==t&&e.some((e,s)=>s>t&&"chat"===e.type)}),h=(0,u.Mz)(e=>e.entities,e=>e.ids,(e,t)=>t.map(t=>e[t]).filter(e=>void 0!==e)),m=(0,u.Mz)(e=>e.entities,e=>e.scopeEvents.timeline,e=>e.ids,(e,t,s)=>(0,d.ru)(e,t,s)),y=(0,u.Mz)(e=>e.entities,e=>e.ids,e=>e.timelinePercentage,(e,t,s)=>(0,d.v9)(e,t,s)),S=(0,u.Mz)(m,e=>e.timelinePercentage,d.U8),w=(e,t)=>e.entities[t],I=(0,u.Mz)(h,e=>{let t=e.flatMap(e=>"event"===e.type&&n.yF.isEventInScope(e.event,"planner")?[e.event]:[]),s=t.findLast(e=>"planUpdate"===e.type);return{statusUpdate:t.findLast(e=>"statusUpdate"===e.type),planUpdate:s}}),b=(0,u.Mz)(h,e=>{for(let t=e.length-1;t>=0;t--){let s=e[t];if("event"===s.type&&"liveStatus"===s.event.type)return s.event.text}return null}),M=e=>{if((null==e?void 0:e.type)!=="event")return!1;let t=e.event;return n.yF.isEventInScope(t,"chatBox")},E=(e,t,s)=>{var i,n;if(0===s.length||t<s[0].index)return null;let o=null===(i=s.findLast(e=>e.index<=t))||void 0===i?void 0:i.id;if(!o)return null;let r=e[o];if((null==r?void 0:r.type)!=="event")return null;let{event:a}=r;if("toolUsed"===a.type){let e;if("error"===a.status)return"terminal"===a.tool?{brief:a.description,event:a,toolStatus:{tool:"terminal",errorMsg:a.description,terminals:{terminal_1:{name:"",history:[]}}}}:"browser"===a.tool?{brief:a.brief,event:a,toolStatus:{tool:"browser",url:"",screenshot:"",errorMsg:a.description},description:a.description}:"search"===a.tool?{brief:a.brief,event:a,toolStatus:{tool:"search",queries:[],results:[],errorMsg:a.description},description:a.description}:"text_editor"===a.tool?{brief:a.brief,event:a,toolStatus:{tool:"text_editor",files:{},errorMsg:a.description},description:a.description}:null;if("success"!==a.status)return null;if("browser"===a.tool){let{screenshot:t,url:s}=a.detail.browser;e={tool:"browser",url:s,screenshot:t}}else if("search"===a.tool){let{queries:t,results:s}=a.detail.search;e={tool:"search",queries:t.flatMap(e=>e.split(" ")),results:s}}else if("terminal"===a.tool){let{shellId:t,output:s}=a.detail.terminal,i={};i[t]={name:t,history:s},e={tool:"terminal",terminals:i}}else{if("text_editor"!==a.tool)return null;let{path:t="result",content:s,oldContent:i,output:o}=a.detail.textEditor,r={};r[t]={type:o?"output":"file",path:t,content:null!==(n=null!=s?s:o)&&void 0!==n?n:"",oldContent:i},e={tool:"text_editor",files:r}}return{brief:a.tool,event:a,description:a.description,toolStatus:e}}return"terminalUpdate"===a.type?{brief:a.brief,description:a.description,event:a,toolStatus:{tool:"terminal",terminals:{[a.shellId]:{name:a.shellId,history:[a.output]}}}}:null},L={selectSandbox:(0,u.Mz)(g,e=>e[e.length-1]||null),selectChatBoxInfoRunning:f,selectTimelineDetails:S,selectTimelinePoints:m,ids:e=>e.ids,selectTimelinePercentage:e=>e.timelinePercentage,selectCurrentIndex:y,selectMessageById:w,isConnected:e=>"connected"===e.status,error:e=>e.error,selectDeployConfirmStatus:(e,t)=>{let s=v(e).find(e=>"confirmDeploy"===e.type&&e.deployActionId===t);return s?s.accept?"confirmed":"declined":"pending"},lastDeployedSuccessEvent:e=>v(e).findLast(e=>"deploySuccess"===e.type)||null,selectLastFrontendEventId:e=>e.frontendEventIds[e.frontendEventIds.length-1],chatBoxMessageIds:(0,u.Mz)(e=>e.scopeEvents.chatBox,e=>e.map(e=>e.id)),selectChatBoxMessage:(0,u.Mz)(w,e=>{if(M(e))return e.event}),selectChatBoxMessages:(0,u.Mz)(v,e=>{let t=[],s=new Map,i=null,n=[];return e.forEach(e=>{switch(e.type){case"chat":t.push(e),i=null;return;case"knowledgeSuggested":case"resourceAccessed":i?i.children.push(e):t.push(e);return;case"newPlanStep":{let n={type:"stepGroup",event:e,children:[]};i=n,t.push(n),s.set(e.stepId,n);return}case"statusUpdate":case"toolUsed":{if("statusUpdate"===e.type&&(e.noRender||"stopped"===e.agentStatus))return;let s=!1,o=-1;for(let i=t.length-1;i>=0;i--){let n=t[i];if((null==n?void 0:n.type)==="stepGroup"&&n.event.stepId===e.planStepId){o=i;break}(null==n?void 0:n.type)==="chat"&&(s=!0)}if(-1!==o){let n=t[o];if(s){let s={...n,event:{...n.event,isContinue:!0},children:[]};s.children.push(e),t.push(s),i=s}else n.children.push(e)}else{let s=t[t.length-1];"statusUpdate"===e.type&&"error"===e.agentStatus?(null==s?void 0:s.type)==="chat"&&"assistant"===s.sender&&s.content||t.push(e):n.push(e)}return}}}),n.forEach(e=>{let t=s.get(e.planStepId);t?(t.children.push(e),t.children=t.children.sort((e,t)=>e.timestamp<t.timestamp?-1:e.timestamp>t.timestamp?1:0)):console.log("%cCannot find plan step: ".concat(e.planStepId),"color: red")}),t.flatMap(e=>"stepGroup"===e.type&&0===e.children.length?[]:[e])}),eventStreamEvents:(0,u.Mz)(h,y,(e,t)=>T(e,t,"eventStream")),liveStatus:b,plannerStatus:I,terminalStatus:(0,u.Mz)(h,y,(e,t)=>{let s={};function i(e){return s[e]||(s[e]={name:e,history:[]}),s[e]}let n=T(e,t,"terminal"),o=new Map;return(n.forEach(e=>{if("toolUsed"===e.type&&"terminal"===e.tool&&"success"===e.status){let{shellId:t,outputType:s,output:n}=e.detail.terminal,r=i(t);if(!n){console.error("terminal output empty",e);return}"append"===s&&(r.history=[...r.history,n[0]]),"replace_all"===s&&(r.history=n),"replace_last"===s&&(r.history=[...r.history.slice(0,-1),n[0]]),o.set(t,!0)}else if("terminalUpdate"===e.type){let t=i(e.shellId);o.has(e.shellId)?t.history[t.history.length-1]=e.output:(t.history=t.history.concat(e.output),o.set(e.shellId,!0))}}),0===Object.keys(s).length)?null:{tool:"terminal",terminals:s}}),followAgentStatus:c(e=>e.entities,y,e=>e.scopeEvents.timeline,(e,t,s)=>E(e,t,s)),lastFollowAgentStatus:(0,u.Mz)(e=>e.entities,e=>e.scopeEvents.timeline,(e,t)=>{let s=t[t.length-1];return s?E(e,s.index,t):null}),files:(0,u.Mz)(v,e=>{let t={};return e.forEach(e=>{if("toolUsed"===e.type&&"text_editor"===e.tool){var s;let i=null===(s=e.detail)||void 0===s?void 0:s.textEditor;if(i){let{path:s,content:o}=i;if(s&&o){let i=(0,n.vE)(s)||"";t[s]={eventId:e.id,filename:s,timestamp:e.timestamp,fileContent:o,filetype:i,type:"local",id:e.id}}}}else"chat"===e.type&&("assistant"===e.sender?e.attachments.forEach(s=>{let i=s.path||s.url;i&&s.url&&(t[i]={eventId:e.id,filename:s.filename,timestamp:s.timestamp,url:s.url,type:"server",id:s.url,filetype:"file"===s.type?(0,n.vE)(s.filename)||"":s.type})}):e.attachments.forEach(s=>{t[s.url]={eventId:e.id,filename:s.filename,timestamp:e.timestamp,url:s.url,type:"server",id:s.url,filetype:"file"===s.type?(0,n.vE)(s.filename)||"":s.type}}))}),Object.values(t)}),chatAttachments:(0,u.Mz)(v,e=>{let t={};return e.forEach(e=>{"chat"===e.type&&"assistant"===e.sender&&e.attachments.forEach(s=>{let i=s.path||s.url;i&&s.url&&(t[i]={eventId:e.id,filename:s.filename,timestamp:s.timestamp,url:s.url,type:"server",id:s.url,filetype:"file"===s.type?(0,n.vE)(s.filename)||"":s.type})})}),Object.values(t)}),showHomeView:(0,u.Mz)(e=>e.scopeEvents.chatBox,e=>0===e.length),isSandBoxError:(0,u.Mz)(e=>e.entities,e=>e.scopeEvents.sandbox,(e,t)=>{console.log(t,"FFFF");let s=t.slice().sort((e,t)=>e.index-t.index),i=s[s.length-1];if(!i)return!1;let n=e[i.id];return!!n&&"event"===n.type&&"sandboxUpdate"===n.event.type&&"error"===n.event.status})};function T(e,t,s,i){return(t<=-1||t>=e.length?e:e.slice(0,t+1)).flatMap(e=>"event"===e.type&&n.yF.isEventInScope(e.event,s)?i&&!i(e.event)?[]:[e.event]:[])}let U=()=>({status:"disconnected",error:null,contextLengthStatus:"normal",frontendEventIds:[],scopeEvents:{browser:[],timeline:[],chatBox:[],textEditor:[],sandbox:[],terminal:[],planner:[],eventStream:[]},timelinePercentage:100}),_=()=>l.Z.getInitialState(U());function x(e,t){var s;return{type:"event",timestamp:null!==(s=t.timestamp)&&void 0!==s?s:Date.now(),event:t,messageStatus:"confirmed",id:t.id,sessionId:e}}function P(e,t){return"overflow"===e||"force"===t.mode?"overflow":"tooLong"}let A=(0,o.Z0)({name:"websocket",initialState:_(),reducers:{disconnected:(e,t)=>{var s,i;e.status="disconnected",e.error=null!==(i=null===(s=t.payload.error)||void 0===s?void 0:s.message)&&void 0!==i?i:"Connection failed"},connected:e=>{e.status="connected",e.error=null},connecting:e=>{e.status="connecting",e.error=null},missingEventsReceived:(e,t)=>{let{afterId:s,events:i}=t.payload,o=e.entities[s];if(o)for(let t of i)for(let s of(e.entities[t.id]||("contextTooLong"===t.type&&(e.contextLengthStatus=P(e.contextLengthStatus,t)),l.Z.addOne(e,{type:"event",timestamp:t.timestamp,id:t.id,sessionId:o.sessionId,messageStatus:"confirmed",event:t})),n.yF.getEventScopes(t.type)))-1===e.scopeEvents[s].findIndex(e=>e.id===t.id)&&e.scopeEvents[s].push({index:e.ids.length-1,id:t.id})},messageSentTimeout:(e,t)=>{let s=e.entities[t.payload.messageId];s&&"confirmed"!==s.messageStatus&&l.Z.updateOne(e,{id:t.payload.messageId,changes:{messageStatus:"failed",errorMsg:r.I.t("Request Timeout")}})},received:(e,t)=>{let s=e.entities[t.payload.id];if(s&&"confirmed"===s.messageStatus){console.warn("BUG: Event already exists",t.payload);return}if("agent_error"===t.payload.type&&(console.error("Agent error:",t.payload),(0,i.oR)({variant:"error",title:r.I.t("Manus Agent Error: ")+t.payload.message})),"event"!==t.payload.type){l.Z.addOne(e,{...t.payload,messageStatus:t.payload.messageStatus||"confirmed"});return}let o=t.payload.event;"contextTooLong"===o.type&&(e.contextLengthStatus=P(e.contextLengthStatus,o));let a=o.type,u=o.id;if((0,n.Bl)(o)){let s=e.entities[o.targetEventId],i="";if(s&&"event"===s.type){var c;i=null!==(c=s.event.content)&&void 0!==c?c:""}u=o.targetEventId,a="chat",l.Z.upsertOne(e,{type:"event",timestamp:o.timestamp,id:u,sessionId:t.payload.sessionId,messageStatus:"pending",event:{type:"chat",messageType:"text",id:u,content:i+o.delta.content,attachments:[],timestamp:o.timestamp,sender:o.sender}})}else e.frontendEventIds.push(t.payload.id),l.Z.upsertOne(e,{...t.payload,messageStatus:t.payload.messageStatus||"confirmed"});let p=n.yF.getEventScopes(a),v=null;if(p.includes("timeline")&&100!==e.timelinePercentage){let t=e.scopeEvents.timeline,s=(0,d.ru)(e.entities,t,e.ids);if(s.length>0){let{currentIndex:t}=(0,d.U8)(s,e.timelinePercentage),i=l.Z.getSelectors().selectAll(e)[t];i&&(v=i.timestamp)}}for(let t of p)-1===e.scopeEvents[t].findLastIndex(e=>e.id===u)&&e.scopeEvents[t].push({index:e.ids.length-1,id:u});if(v){let t=e.scopeEvents.timeline,s=(0,d.ru)(e.entities,t,e.ids);e.timelinePercentage=(0,d.jh)(s,v)}},initEvents:(e,t)=>{let{sessionId:s,events:i}=t.payload,o=i.map(e=>x(s,e)),r=l.Z.setAll(l.Z.getInitialState({...U(),status:e.status}),o);return r.frontendEventIds=l.Z.getSelectors().selectIds(r),l.Z.getSelectors().selectAll(r).forEach((e,t)=>{if("event"===e.type)for(let s of("contextTooLong"===e.event.type&&(r.contextLengthStatus=P(r.contextLengthStatus,e.event)),n.yF.getEventScopes(e.event.type)))r.scopeEvents[s].push({id:e.id,index:t})}),r},clearEvents:e=>({..._(),status:e.status}),errored:(e,t)=>{e.error=t.payload},timelineChanged:(e,t)=>{e.timelinePercentage=t.payload}},extraReducers:e=>{e.addCase(a.r2,(e,t)=>{let s=null==t?void 0:t.payload;return s&&s.websocket?{...s.websocket,status:"disconnected"}:e})},selectors:L})},21731:(e,t,s)=>{"use strict";s.d(t,{cn:()=>r,hU:()=>d,nU:()=>u,pJ:()=>a,zM:()=>l});var i=s(62121),n=s(29244),o=s(26745);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,o.QP)((0,n.$)(t))}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:512,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/jpeg",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:75,n=document.createElement("img");if(n.src=URL.createObjectURL(e),await new Promise((e,t)=>{n.onload=()=>{e()}}),n.width<=t&&n.height<=t)return e;let o=document.createElement("canvas"),r=o.getContext("2d"),a=n.width,l=n.height;return a>l?a>t&&(l*=t/a,a=t):l>t&&(a*=t/l,l=t),o.width=a,o.height=l,"image/webp"===s&&0!==o.toDataURL("image/webp").indexOf("data:image/webp")&&(s="image/jpeg"),r.drawImage(n,0,0,a,l),await new Promise((t,n)=>{o.toBlob(i=>{t(new File([i],e.name,{type:s}))},s,i)})}async function l(e){let t=new FileReader;return t.readAsDataURL(e),new Promise((e,s)=>{t.onloadend=()=>{e(t.result)},t.onerror=e=>{s(e)}})}function d(){let e=i.G.userAgent;return/Windows NT 10.0/.test(e)||/Windows NT 6.2/.test(e)||/Windows NT 6.1/.test(e)||/Windows NT 6.0/.test(e)||/Windows NT 5.1/.test(e)?"Windows":/Android/.test(e)?"Android":/iPhone/.test(e)||/iPad/.test(e)?"IOS":/Mac OS X/.test(e)?"OSX":/Linux/.test(e)?"Linux":"Windows"}function u(e,t){let{multiple:s=!1,accept:i=[]}=t||{},n=document.createElement("input");n.type="file",s&&(n.multiple=!0),n.style.display="none",n.accept=i.map(e=>".txt"===e?"text/plain":e).join(", "),document.body.appendChild(n);let o=()=>{n.files&&e(Array.from(n.files)),n.removeEventListener("change",o),n.remove()};n.addEventListener("change",o),n.click()}},78085:(e,t,s)=>{"use strict";s.d(t,{He:()=>a,ND:()=>r,bw:()=>i});let i={root:"/",auth:{callback:"/callback"},invitations:{root:"/invitation",accept:e=>"/invitation?code=".concat(e),waitlist:{root:"/invitation/waitlist"},form:{root:e=>"/invitation/"+e+"?form=1"}},app:{root:()=>"/app",session:e=>"/app/".concat(e)},share:{root:"/share"},usecases:{root:"/usecases"},usecaseSubmissions:{root:"/usecase_submissions"},spaceGallery:{root:"/space-gallery"},updates:{root:"/updates"},terms:{root:"/terms"},privacy:{root:"/privacy"},feedback:{root:"/feedback"},sandbox_notfound:{root:"/sandbox_notfound"},file_previewer:{export:{root:"/file_previewer/export"}},login:{root:"/login",withParams:e=>{let{redirectUrl:t,type:s,code:i}=e,n=new URLSearchParams;return t&&n.set("redirectUrl",t),s&&n.set("type",s),i&&n.set("code",i),"/login?".concat(n.toString())}},resetPassword:{root:"/reset-password"},authLanding:{root:"/auth_landing"},unavailable:{root:"/unavailable"}},n=[i.root,i.usecases.root,i.updates.root,i.terms.root,i.privacy.root,i.invitations.root,i.invitations.waitlist.root,i.feedback.root,i.sandbox_notfound.root,i.login.root,i.resetPassword.root,i.authLanding.root,i.usecaseSubmissions.root,i.unavailable.root,i.spaceGallery.root],o=[i.share.root];function r(e){return n.some(t=>e===t)||o.some(t=>e.startsWith(t))}let a=["/",i.usecases.root,i.usecaseSubmissions.root,i.spaceGallery.root,i.updates.root]},62121:(e,t,s)=>{"use strict";s.d(t,{G:()=>a}),s(57271);let i=e=>"__bfe_ssr_".concat(e,"__"),n={requestUrl:i("request-url"),requestPathName:i("request-pathname"),requestHeader:i("request-header"),requestCookie:i("request-cookie")},o=globalThis;class r{get isRunInServerSide(){return!1}setRequestHeaders(e){o[n.requestHeader]=e}get requestHeaders(){return o[n.requestHeader]}get userAgent(){try{if(this.isRunInServerSide){var e;return null!==(e=this.requestHeaders.get("user-agent"))&&void 0!==e?e:""}return window.navigator.userAgent}catch(e){return globalThis.console.log("get userAgent error:",e),""}}}let a=new r}}]);